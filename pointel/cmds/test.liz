#!/bin/liz

local wd = Liz.wd()
local project = Liz.path_name(wd)
print("Testing " .. project .. " ...")
local dev_path = Liz.path_parent_find(wd, "Devs")
if dev_path == "" then
    print("Could not found the Devs path.")
    return
end
local tst_path = Liz.path_join(dev_path, "Test")
local cmd_dest = Liz.path_join(tst_path, "cmd")
local pro_dest = Liz.path_join(cmd_dest, project)
Liz.mkdir(pro_dest)
Liz.run("build")
local origin = "target/debug/" .. project .. Liz.exe_ext()
local destiny = Liz.path_join(pro_dest, project .. Liz.exe_ext())
Liz.cp(origin, destiny)
if Liz.has("test.liz") then Liz.run_wd("test.liz") end
print("Done test command")
